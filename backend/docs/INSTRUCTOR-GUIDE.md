# Exercise 1 è®²å¸ˆæŒ‡å¯¼æ‰‹å†Œ

## ç»ƒä¹ æ¦‚è¿°

**Exercise 1: EC2å®ä¾‹ä¿¡æ¯æ”¶é›†ä¸APIæäº¤**

è¿™æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„äº‘è®¡ç®—å®è®­ç»ƒä¹ ï¼Œå­¦å‘˜éœ€è¦ï¼š
1. ç†è§£AWS EC2å…ƒæ•°æ®æœåŠ¡çš„ä½¿ç”¨
2. æŒæ¡HTTP APIè°ƒç”¨çš„åŸºæœ¬æ–¹æ³•
3. å®ç°ç³»ç»Ÿä¿¡æ¯æ”¶é›†å’Œæ•°æ®æäº¤
4. å¤„ç†ç½‘ç»œé€šä¿¡ä¸­çš„é”™è¯¯å’Œå¼‚å¸¸

## æ•™å­¦ç›®æ ‡

### æŠ€æœ¯æŠ€èƒ½
- AWS EC2å…ƒæ•°æ®æœåŠ¡ä½¿ç”¨
- RESTful APIè°ƒç”¨å’ŒJSONæ•°æ®å¤„ç†
- ç½‘ç»œç¼–ç¨‹å’Œé”™è¯¯å¤„ç†
- ç³»ç»Ÿä¿¡æ¯è·å–æ–¹æ³•

### è½¯æŠ€èƒ½  
- é—®é¢˜åˆ†æå’Œè§£å†³èƒ½åŠ›
- æ–‡æ¡£é˜…è¯»å’Œç†è§£èƒ½åŠ›
- è°ƒè¯•å’Œæ•…éšœæ’é™¤æŠ€èƒ½
- ä»£ç ç»„ç»‡å’Œç»“æ„è®¾è®¡

## ç¯å¢ƒå‡†å¤‡

### 1. æœåŠ¡å™¨éƒ¨ç½²

**å¿«é€Ÿæµ‹è¯•ç¯å¢ƒ**ï¼š
```bash
cd backend
npm install
npm run start:exercise1
```
æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨

**ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**ï¼š
å‚è€ƒ `backend/DEPLOYMENT-GUIDE.md`

### 2. å­¦å‘˜EC2å®ä¾‹

**æ¨èé…ç½®**ï¼š
- å®ä¾‹ç±»å‹ï¼št3.micro (å…è´¹å¥—é¤)
- AMIï¼šAmazon Linux 2 æˆ– Ubuntu 20.04
- å®‰å…¨ç»„ï¼šå…è®¸å‡ºç«™HTTP/HTTPSè®¿é—®
- ç½‘ç»œï¼šç¡®ä¿èƒ½è®¿é—®è®­ç»ƒAPIæœåŠ¡å™¨

**æ‰¹é‡åˆ›å»ºè„šæœ¬**ï¼š
```bash
# ä½¿ç”¨AWS CLIæ‰¹é‡åˆ›å»ºå®ä¾‹
aws ec2 run-instances \
  --image-id ami-0abcdef1234567890 \
  --count 20 \
  --instance-type t3.micro \
  --key-name training-keypair \
  --security-group-ids sg-12345678 \
  --subnet-id subnet-12345678 \
  --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=Training-Student-{1..20}}]'
```

## è¯¾ç¨‹å®‰æ’å»ºè®®

### ç¬¬1è¯¾æ—¶ï¼šç†è®ºè®²è§£ (30åˆ†é’Ÿ)
1. **AWS EC2åŸºç¡€** (10åˆ†é’Ÿ)
   - EC2å®ä¾‹æ¦‚å¿µ
   - å…ƒæ•°æ®æœåŠ¡ä»‹ç»
   - å®‰å…¨ç»„å’Œç½‘ç»œé…ç½®

2. **APIåŸºç¡€çŸ¥è¯†** (10åˆ†é’Ÿ)
   - RESTful APIæ¦‚å¿µ
   - HTTPæ–¹æ³•å’ŒçŠ¶æ€ç 
   - JSONæ•°æ®æ ¼å¼

3. **ç»ƒä¹ ä»»åŠ¡è¯´æ˜** (10åˆ†é’Ÿ)
   - ä»»åŠ¡ç›®æ ‡å’Œè¦æ±‚
   - è¯„åˆ†æ ‡å‡†
   - æäº¤æ–¹å¼

### ç¬¬2-3è¯¾æ—¶ï¼šåŠ¨æ‰‹å®è·µ (90åˆ†é’Ÿ)
1. **ç¯å¢ƒå‡†å¤‡** (15åˆ†é’Ÿ)
   - è¿æ¥EC2å®ä¾‹
   - å®‰è£…å¼€å‘ç¯å¢ƒ
   - æµ‹è¯•ç½‘ç»œè¿æ¥

2. **ä»£ç å¼€å‘** (60åˆ†é’Ÿ)
   - å­¦å‘˜ç‹¬ç«‹ç¼–ç¨‹
   - è®²å¸ˆå·¡å›æŒ‡å¯¼
   - é—®é¢˜ç­”ç–‘

3. **æµ‹è¯•å’Œæäº¤** (15åˆ†é’Ÿ)
   - ç¨‹åºæµ‹è¯•
   - ç»“æœæäº¤
   - æ’è¡Œæ¦œæŸ¥çœ‹

### ç¬¬4è¯¾æ—¶ï¼šæ€»ç»“è®¨è®º (30åˆ†é’Ÿ)
1. **ä»£ç åˆ†äº«** (15åˆ†é’Ÿ)
   - ä¼˜ç§€ä»£ç å±•ç¤º
   - ä¸åŒå®ç°æ–¹æ¡ˆå¯¹æ¯”
   - æœ€ä½³å®è·µåˆ†äº«

2. **é—®é¢˜æ€»ç»“** (15åˆ†é’Ÿ)
   - å¸¸è§é”™è¯¯åˆ†æ
   - è§£å†³æ–¹æ¡ˆè®¨è®º
   - çŸ¥è¯†ç‚¹å›é¡¾

## è¯„åˆ†å’Œç›‘æ§

### è‡ªåŠ¨è¯„åˆ†ç³»ç»Ÿ

ç³»ç»Ÿä¼šæ ¹æ®ä»¥ä¸‹æ ‡å‡†è‡ªåŠ¨è¯„åˆ†ï¼š

```javascript
function calculateScore(submission) {
  const { ec2InstanceInfo } = submission;
  let score = 0;
  
  // æ£€æŸ¥å¿…éœ€å­—æ®µ (æ¯é¡¹25åˆ†)
  if (ec2InstanceInfo.operatingSystem) score += 25;
  if (ec2InstanceInfo.amiId && ec2InstanceInfo.amiId.startsWith('ami-')) score += 25;
  if (ec2InstanceInfo.internalIpAddress && isValidIP(ec2InstanceInfo.internalIpAddress)) score += 25;
  if (ec2InstanceInfo.instanceType) score += 25;
  
  return score;
}
```

### å®æ—¶ç›‘æ§é¢æ¿

è®¿é—® `http://æœåŠ¡å™¨åœ°å€/api/statistics/dashboard` æŸ¥çœ‹ï¼š
- å­¦å‘˜æ³¨å†Œæƒ…å†µ
- æäº¤ç»Ÿè®¡
- å®æ—¶æ’è¡Œæ¦œ
- é”™è¯¯æ—¥å¿—

### æ•°æ®å¯¼å‡º

```bash
# å¯¼å‡ºå­¦å‘˜æˆç»©
curl "http://æœåŠ¡å™¨åœ°å€/api/statistics/rankings" > rankings.json

# å¯¼å‡ºè¯¦ç»†æäº¤è®°å½•
curl "http://æœåŠ¡å™¨åœ°å€/api/submissions/stats" > submissions.json
```

## å¸¸è§é—®é¢˜å¤„ç†

### å­¦å‘˜ç«¯é—®é¢˜

**1. æ— æ³•è®¿é—®å…ƒæ•°æ®æœåŠ¡**
```bash
# æ£€æŸ¥å®ä¾‹å…ƒæ•°æ®æœåŠ¡çŠ¶æ€
curl -I http://169.254.169.254/latest/meta-data/

# å¦‚æœå¤±è´¥ï¼Œæ£€æŸ¥å®ä¾‹è®¾ç½®
aws ec2 describe-instances --instance-ids i-1234567890abcdef0 \
  --query 'Reservations[*].Instances[*].MetadataOptions'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿å®ä¾‹å¯ç”¨äº†å…ƒæ•°æ®æœåŠ¡
- æ£€æŸ¥å®‰å…¨ç»„è®¾ç½®
- æä¾›æ¨¡æ‹Ÿæ•°æ®ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ

**2. APIè¿æ¥å¤±è´¥**
```bash
# æµ‹è¯•ç½‘ç»œè¿é€šæ€§
curl -I http://è®­ç»ƒæœåŠ¡å™¨åœ°å€/health

# æ£€æŸ¥DNSè§£æ
nslookup è®­ç»ƒæœåŠ¡å™¨åŸŸå
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
- éªŒè¯å®‰å…¨ç»„é…ç½®
- ç¡®è®¤ç½‘ç»œè·¯ç”±

**3. ç¨‹åºè¿è¡Œé”™è¯¯**
- æ£€æŸ¥ç¼–ç¨‹è¯­è¨€ç¯å¢ƒ
- éªŒè¯ä¾èµ–åŒ…å®‰è£…
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—

### æœåŠ¡å™¨ç«¯é—®é¢˜

**1. æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
systemctl status postgresql

# æµ‹è¯•è¿æ¥
psql -h localhost -U training_user -d training_system
```

**2. å†…å­˜ä¸è¶³**
```bash
# ç›‘æ§èµ„æºä½¿ç”¨
htop
free -h

# æ¸…ç†æ—¥å¿—æ–‡ä»¶
pm2 flush
```

**3. é«˜å¹¶å‘å¤„ç†**
- å¢åŠ æœåŠ¡å™¨å®ä¾‹
- é…ç½®è´Ÿè½½å‡è¡¡
- ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢

## æ‰©å±•ç»ƒä¹ 

### è¿›é˜¶è¦æ±‚
1. **é”™è¯¯é‡è¯•æœºåˆ¶** - å®ç°æŒ‡æ•°é€€é¿é‡è¯•
2. **é…ç½®æ–‡ä»¶æ”¯æŒ** - æ”¯æŒå¤–éƒ¨é…ç½®æ–‡ä»¶
3. **æ—¥å¿—è®°å½•** - è¯¦ç»†çš„æ“ä½œæ—¥å¿—
4. **æ€§èƒ½ä¼˜åŒ–** - å¹¶å‘è¯·æ±‚å¤„ç†

### é¢å¤–æŒ‘æˆ˜
1. **å¤šå®ä¾‹ç›‘æ§** - ç›‘æ§å¤šä¸ªEC2å®ä¾‹
2. **å®šæ—¶ä»»åŠ¡** - å®šæœŸè‡ªåŠ¨æäº¤æ•°æ®
3. **æ•°æ®å¯è§†åŒ–** - ç”Ÿæˆå›¾è¡¨å±•ç¤ºæ•°æ®
4. **å‘Šè­¦åŠŸèƒ½** - å¼‚å¸¸æƒ…å†µè‡ªåŠ¨å‘Šè­¦

## æˆç»©ç»Ÿè®¡

### è¯„åˆ†ç»´åº¦
- **åŠŸèƒ½å®Œæ•´æ€§** (40%) - æ˜¯å¦æˆåŠŸæäº¤æ‰€æœ‰å¿…éœ€ä¿¡æ¯
- **ä»£ç è´¨é‡** (30%) - ä»£ç ç»“æ„ã€é”™è¯¯å¤„ç†ã€æ³¨é‡Š
- **åˆ›æ–°æ€§** (20%) - é¢å¤–åŠŸèƒ½ã€ä¼˜åŒ–æ–¹æ¡ˆ
- **æäº¤æ—¶é—´** (10%) - å®Œæˆé€Ÿåº¦

### æ’åè§„åˆ™
1. æ€»åˆ†é«˜è€…æ’åé å‰
2. æ€»åˆ†ç›¸åŒæ—¶ï¼Œæäº¤æ—¶é—´æ—©è€…æ’åé å‰
3. å¯ä»¥å¤šæ¬¡æäº¤ï¼Œå–æœ€é«˜åˆ†

### æˆç»©æŠ¥å‘Š
```bash
# ç”Ÿæˆæˆç»©æŠ¥å‘Š
node generate-report.js > exercise1-report.html
```

## æ•™å­¦èµ„æº

### å‚è€ƒæ–‡æ¡£
- [AWS EC2ç”¨æˆ·æŒ‡å—](https://docs.aws.amazon.com/ec2/)
- [EC2å®ä¾‹å…ƒæ•°æ®](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html)
- [RESTful APIè®¾è®¡æŒ‡å—](https://restfulapi.net/)

### ç¤ºä¾‹ä»£ç 
- `backend/student-example.js` - Node.jså®Œæ•´ç¤ºä¾‹
- `docs/EXERCISE-1-INSTRUCTIONS.md` - è¯¦ç»†å¼€å‘æŒ‡å—
- `backend/test-api.js` - APIæµ‹è¯•è„šæœ¬

### æ•…éšœæ’é™¤
- `backend/DEPLOYMENT-GUIDE.md` - éƒ¨ç½²å’Œè¿ç»´æŒ‡å—
- æœåŠ¡å™¨æ—¥å¿—ï¼š`pm2 logs training-api`
- æ•°æ®åº“æ—¥å¿—ï¼š`/var/log/postgresql/`

---

**ç¥æ•™å­¦é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜è¯·å‚è€ƒæŠ€æœ¯æ–‡æ¡£æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚** ğŸ“š